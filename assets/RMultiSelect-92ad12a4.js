import{_ as ye,a as ue}from"./RBaseInput-33505fa1.js";import{o as p,c as v,a as I,q as ve,p as d,m as E,h as j,D as ge,E as _e,b as _,w as h,F as V,n as K,t as G,u as S,G as x,g as C,H as he,J as ae,K as me,f as w,e as de,L as Se,A as we,B as Oe}from"./index-aa95f5be.js";function g(t){return t!=null&&typeof t=="object"&&t["@@functional/placeholder"]===!0}function y(t){return function e(n){return arguments.length===0||g(n)?e:t.apply(this,arguments)}}function k(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return g(n)?e:y(function(u){return t(n,u)});default:return g(n)&&g(r)?e:g(n)?y(function(u){return t(u,r)}):g(r)?y(function(u){return t(n,u)}):t(n,r)}}}const P=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function Ae(t){return t!=null&&typeof t["@@transducer/step"]=="function"}function je(t,e,n){return function(){if(arguments.length===0)return n();var r=arguments[arguments.length-1];if(!P(r)){for(var u=0;u<t.length;){if(typeof r[t[u]]=="function")return r[t[u]].apply(r,Array.prototype.slice.call(arguments,0,-1));u+=1}if(Ae(r)){var a=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return a(r)}}return n.apply(this,arguments)}}const X={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}};function Y(t){for(var e=[],n;!(n=t.next()).done;)e.push(n.value);return e}function H(t,e,n){for(var r=0,u=n.length;r<u;){if(t(e,n[r]))return!0;r+=1}return!1}function Ie(t){var e=String(t).match(/^function (\w*)/);return e==null?"":e[1]}function b(t,e){return Object.prototype.hasOwnProperty.call(e,t)}function be(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}const F=typeof Object.is=="function"?Object.is:be;var J=Object.prototype.toString,se=function(){return J.call(arguments)==="[object Arguments]"?function(e){return J.call(e)==="[object Arguments]"}:function(e){return b("callee",e)}}(),ke=!{toString:null}.propertyIsEnumerable("toString"),W=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Q=function(){return arguments.propertyIsEnumerable("length")}(),ze=function(e,n){for(var r=0;r<e.length;){if(e[r]===n)return!0;r+=1}return!1},Z=y(typeof Object.keys=="function"&&!Q?function(e){return Object(e)!==e?[]:Object.keys(e)}:function(e){if(Object(e)!==e)return[];var n,r,u=[],a=Q&&se(e);for(n in e)b(n,e)&&(!a||n!=="length")&&(u[u.length]=n);if(ke)for(r=W.length-1;r>=0;)n=W[r],b(n,e)&&!ze(u,n)&&(u[u.length]=n),r-=1;return u}),ee=y(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});function te(t,e,n,r){var u=Y(t),a=Y(e);function o(c,i){return L(c,i,n.slice(),r.slice())}return!H(function(c,i){return!H(o,i,c)},a,u)}function L(t,e,n,r){if(F(t,e))return!0;var u=ee(t);if(u!==ee(e))return!1;if(typeof t["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t);if(typeof t.equals=="function"||typeof e.equals=="function")return typeof t.equals=="function"&&t.equals(e)&&typeof e.equals=="function"&&e.equals(t);switch(u){case"Arguments":case"Array":case"Object":if(typeof t.constructor=="function"&&Ie(t.constructor)==="Promise")return t===e;break;case"Boolean":case"Number":case"String":if(!(typeof t==typeof e&&F(t.valueOf(),e.valueOf())))return!1;break;case"Date":if(!F(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(!(t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode))return!1;break}for(var a=n.length-1;a>=0;){if(n[a]===t)return r[a]===e;a-=1}switch(u){case"Map":return t.size!==e.size?!1:te(t.entries(),e.entries(),n.concat([t]),r.concat([e]));case"Set":return t.size!==e.size?!1:te(t.values(),e.values(),n.concat([t]),r.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var o=Z(t);if(o.length!==Z(e).length)return!1;var c=n.concat([t]),i=r.concat([e]);for(a=o.length-1;a>=0;){var m=o[a];if(!(b(m,e)&&L(e[m],t[m],c,i)))return!1;a-=1}return!0}var M=k(function(e,n){return L(e,n,[],[])});function qe(t,e,n){var r,u;if(typeof t.indexOf=="function")switch(typeof e){case"number":if(e===0){for(r=1/e;n<t.length;){if(u=t[n],u===0&&1/u===r)return n;n+=1}return-1}else if(e!==e){for(;n<t.length;){if(u=t[n],typeof u=="number"&&u!==u)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(e===null)return t.indexOf(e,n)}for(;n<t.length;){if(M(t[n],e))return n;n+=1}return-1}function ne(t,e){return qe(e,t,0)>=0}function $e(t){return Object.prototype.toString.call(t)==="[object Object]"}const Be=Number.isInteger||function(e){return e<<0===e};function U(t){return Object.prototype.toString.call(t)==="[object String]"}var Ee=k(function(e,n){var r=e<0?n.length+e:e;return U(n)?n.charAt(r):n[r]}),Ce=k(function(e,n){if(n!=null)return Be(e)?Ee(e,n):n[e]});const Fe=Ce;var Pe=y(function(e){return P(e)?!0:!e||typeof e!="object"||U(e)?!1:e.length===0?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1});function Le(t){return function e(n){for(var r,u,a,o=[],c=0,i=n.length;c<i;){if(Pe(n[c]))for(r=t?e(n[c]):n[c],a=0,u=r.length;a<u;)o[o.length]=r[a],a+=1;else o[o.length]=n[c];c+=1}return o}}var ie=function(){function t(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return t.prototype.add=function(e){return!re(e,!0,this)},t.prototype.has=function(e){return re(e,!1,this)},t}();function re(t,e,n){var r=typeof t,u,a;switch(r){case"string":case"number":return t===0&&1/t===-1/0?n._items["-0"]?!0:(e&&(n._items["-0"]=!0),!1):n._nativeSet!==null?e?(u=n._nativeSet.size,n._nativeSet.add(t),a=n._nativeSet.size,a===u):n._nativeSet.has(t):r in n._items?t in n._items[r]?!0:(e&&(n._items[r][t]=!0),!1):(e&&(n._items[r]={},n._items[r][t]=!0),!1);case"boolean":if(r in n._items){var o=t?1:0;return n._items[r][o]?!0:(e&&(n._items[r][o]=!0),!1)}else return e&&(n._items[r]=t?[!1,!0]:[!0,!1]),!1;case"function":return n._nativeSet!==null?e?(u=n._nativeSet.size,n._nativeSet.add(t),a=n._nativeSet.size,a===u):n._nativeSet.has(t):r in n._items?ne(t,n._items[r])?!0:(e&&n._items[r].push(t),!1):(e&&(n._items[r]=[t]),!1);case"undefined":return n._items[r]?!0:(e&&(n._items[r]=!0),!1);case"object":if(t===null)return n._items.null?!0:(e&&(n._items.null=!0),!1);default:return r=Object.prototype.toString.call(t),r in n._items?ne(t,n._items[r])?!0:(e&&n._items[r].push(t),!1):(e&&(n._items[r]=[t]),!1)}}function Me(t){var e=Object.prototype.toString.call(t);return e==="[object Uint8ClampedArray]"||e==="[object Int8Array]"||e==="[object Uint8Array]"||e==="[object Int16Array]"||e==="[object Uint16Array]"||e==="[object Int32Array]"||e==="[object Uint32Array]"||e==="[object Float32Array]"||e==="[object Float64Array]"||e==="[object BigInt64Array]"||e==="[object BigUint64Array]"}var Ue=y(function(e){return e!=null&&typeof e["fantasy-land/empty"]=="function"?e["fantasy-land/empty"]():e!=null&&e.constructor!=null&&typeof e.constructor["fantasy-land/empty"]=="function"?e.constructor["fantasy-land/empty"]():e!=null&&typeof e.empty=="function"?e.empty():e!=null&&e.constructor!=null&&typeof e.constructor.empty=="function"?e.constructor.empty():P(e)?[]:U(e)?"":$e(e)?{}:se(e)?function(){return arguments}():Me(e)?e.constructor.from(""):void 0}),Re=y(Le(!0));const Ne=Re;var Te=function(){function t(e,n){this.xf=n,this.f=e,this.set=new ie}return t.prototype["@@transducer/init"]=X.init,t.prototype["@@transducer/result"]=X.result,t.prototype["@@transducer/step"]=function(e,n){return this.set.add(this.f(n))?this.xf["@@transducer/step"](e,n):e},t}();function De(t){return function(e){return new Te(t,e)}}var Ve=k(je([],De,function(t,e){for(var n=new ie,r=[],u=0,a,o;u<e.length;)o=e[u],a=t(o),n.add(a)&&r.push(o),u+=1;return r}));const Ke=Ve;var Ge=y(function(e){return e!=null&&M(e,Ue(e))});const xe=Ge,Xe={__name:"RBaseDropdown",props:{size:{type:String,default:"md"}},setup(t){const e={md:"top-1",lg:"top-1.5"},n=r=>r.preventDefault();return(r,u)=>(p(),v("div",{class:"relative",onMousedown:n},[I("div",{class:d(`bg-white shadow rounded absolute left-0 w-full max-h-64 overflow-y-auto ${e[t.size]}`)},[ve(r.$slots,"default")],2)],32))}},Ye=["onClick"],He={class:"flex-1"},le={__name:"RBaseSelect",props:{name:{type:String},labelRef:{type:String},size:{type:String,default:"md"},placeholder:{type:String},value:{type:Array},onInput:{type:Function},onBlur:{type:Function},isMultiple:{type:Boolean,default:!1},options:{type:Array,required:!0}},setup(t){const e=t,n={md:"h-6 p-1.5",lg:"h-8 p-2"},r={md:"ml-1.5",lg:"ml-2","md-r":"mr-1.5","lg-r":"mr-1.5"},u=E(()=>({name:e.name,labelRef:e.labelRef,size:e.size})),a=j(!1),o=j(null),c=j(""),i=ge([]),m=j(0),R=E(()=>{const s=Ne([e.options||[],e.value||[]]).filter(l=>l).map(l=>typeof l=="string"?{value:l,text:l}:{value:l.value||l.text,text:l.text||l.value});return Ke(Fe("value"))(s)}),z=E(()=>R.value.map(s=>({...s,__plainText:Object.values(s).join(" ")})).filter(({__plainText:s})=>s.toLowerCase().indexOf(c.value.toLowerCase())!==-1).map(s=>(delete s.__plainText,s))),O=()=>{var s;e.isMultiple?c.value="":c.value=(s=i[0])==null?void 0:s.text},oe=()=>{a.value=!0,c.value=""},ce=()=>{a.value=!1,O(),e.onBlur()},q=()=>{e.onInput(i.map(({value:s})=>s))},$=()=>{for(;i.length;)i.shift()},A=s=>i.some(l=>l.value===s.value),N=s=>{A(s)||(e.isMultiple||$(),i.push(s),q()),e.isMultiple||o.value.blur(),O()},B=s=>{let l=0;for(;l<i.length;){if(i[l].value!==s.value){l++;continue}i.splice(l,1)}q(),O()},fe=s=>{if(s.preventDefault(),z.value.length===0)return;const l=z.value[m.value];A(l)?B(l):N(l)},T=()=>{$();for(const s of R.value)(e.value||[]).indexOf(s.value)!==-1&&i.push(s);O()};return T(),_e(()=>e.value,()=>{M(e.value,i.map(({value:s})=>s))||T()}),(s,l)=>{var D;return p(),v("div",{class:"r-select",onFocusin:oe,onFocusout:ce},[_(ye,ae({ref_key:"searchInput",ref:o},u.value,{placeholder:t.isMultiple?"Select...":((D=i[0])==null?void 0:D.text)||"Select...",value:c.value,onInput:f=>c.value=f,onKeydown:me(fe,["enter"])}),{start:h(()=>[(p(!0),v(V,null,K(t.isMultiple?i:[],f=>(p(),v("div",{key:f.value,class:d(`bg-gray-200 flex items-center rounded first:ml-0 ${n[u.value.size]} ${r[u.value.size]}`)},[I("span",null,G(f.text),1),I("button",{type:"button",tabindex:"-1","disable-toggle-focus":"",class:d(`${r[u.value.size]}`),onClick:pe=>B(f)},[_(S(x),{class:"w-3.5 h-3.5 stroke-2 pointer-events-none"})],10,Ye)],2))),128))]),end:h(()=>[i.length>0?(p(),v("button",{key:0,type:"button",tabindex:"-1","disable-toggle-focus":"",class:d(`${r[u.value.size+"-r"]}`),onMousedown:l[0]||(l[0]=()=>{$(),q()})},[_(S(x),{class:"w-4 h-4 stroke-2 pointer-events-none"})],34)):C("",!0),_(S(he),{class:d(`w-4 h-4 stroke-2 shrink-0 ${i.length>0?r[u.value.size]:""} ${r[u.value.size+"-r"]}`)},null,8,["class"])]),_:1},16,["placeholder","value","onInput","onKeydown"]),a.value?(p(),w(Xe,{key:0,size:u.value.size},{default:h(()=>[(p(!0),v(V,null,K(z.value,f=>(p(),w(de,{class:"r-select__option",type:"button",variant:"none",tabindex:"-1",key:f.value,size:u.value.size,onClick:pe=>A(f)?B(f):N(f)},{default:h(()=>[I("span",He,G(f.text),1),A(f)?(p(),w(S(Se),{key:0,class:"w-3.5 h-3.5 stroke-2"})):C("",!0)]),_:2},1032,["size","onClick"]))),128))]),_:1},8,["size"])):C("",!0)],32)}}},Qe={__name:"RSingleSelect",setup(t){return(e,n)=>(p(),w(ue,null,{default:h(r=>[_(le,we(Oe({...r,value:[r.value],onInput:u=>r.onInput(u[0])})),null,16)]),_:1}))}},Ze={__name:"RMultiSelect",setup(t){return(e,n)=>(p(),w(ue,null,{default:h(r=>[_(le,ae({...r,onInput:u=>S(xe)(u)?r.onInput(void 0):r.onInput(u)},{isMultiple:!0}),null,16)]),_:1}))}};export{Qe as _,Ze as a};
